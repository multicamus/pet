<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mutli.com.pet.erp">
	<!-- login -->
	<select id="user_login" parameterType="member" resultType="member">
		SELECT * from member_info
		WHERE member_id = #{member_id} and member_pass = #{member_pass}
	</select>
	<select id="sitter_login" parameterType="sitter" resultType="sitter">
		SELECT * from sitter_info
		WHERE sitter_id = #{sitter_id} and sitter_pass = #{sitter_pass}
	</select>
	<!-- login -->
	
	<!-- read_member start -->
	<select id="member_read" parameterType="String" resultType="member">
		SELECT * 
		FROM member_info 
		WHERE member_id = #{member_id}
	</select>	
	<!-- read_member end-->
	
	<!-- read_sitter start -->
	<select id="sitter_read" parameterType="String" resultType="sitter">
		SELECT * 
		FROM sitter_info
		WHERE sitter_id = #{sitter_id}
	</select>	
 	<select id="sitter_img_read" parameterType="String" resultType="sitter_img">
		SELECT * 
		FROM sitter_img
		WHERE sitter_id = #{sitter_id}
	</select>	 
	<!-- read_sitter end -->
		
	<!-- update start -->	
	<update id="member_update" parameterType="member">
		UPDATE member_info
		SET member_gender = #{member_gender}, member_email = #{member_email}, member_phone = ${member_phone}, member_addr1 = #{member_addr1}, member_addr2 = #{member_addr2}, hospital_name = #{hospital_name}, hospital_addr = #{hospital_addr}, member_birthdate = #{member_birthdate}
		WHERE member_id = #{member_id}
	</update>
	
	<!-- member_photo = #{member_photo} -->
	<update id="sitter_update" parameterType="sitter">
		UPDATE sitter_info
		SET sitter_code=#{sitter_code}, sitter_email=#{sitter_email}, sitter_phone=#{sitter_phone}, sitter_addr1=#{sitter_addr1}, sitter_addr2=#{sitter_addr2}, sitter_birthdate=#{sitter_birthdate}, service_area=#{service_area}, sitter_info=#{sitter_info}
		WHERE sitter_id = #{sitter_id}
	</update>
<!--  	<update id="sitter_img_update" parameterType="sitter_img">
		UPDATE sitter_img
		SET sitter_id = #{sitter_id}, originalImgName = #{originalImgName}, storeImgName = #{storeImgName}
		WHERE sitter_id = #{sitter_id}
	</update>  -->
	<update id="sitter_certi_update" parameterType="sitter">
		UPDATE sitter_info
		SET sitter_certificate = #{sitter_certificate}
		WHERE sitter_id = #{sitter_id}
	</update>
	<!-- update end-->
	
	<!-- insert start -->
	<insert id="member_insert" parameterType="member">
		INSERT INTO member_info (
			member_id, member_pass, member_gender, member_name, member_email, member_phone, member_addr1, member_addr2, member_status, member_startdate, user_type, hospital_name, hospital_addr, member_birthdate)
		VALUES (
			#{member_id}, #{member_pass}, #{member_gender}, #{member_name}, #{member_email}, #{member_phone}, #{member_addr1}, #{member_addr2}, #{member_status}, sysdate, #{user_type}, #{hospital_name}, #{hospital_addr}, #{member_birthdate}) 

	</insert>
	<insert id="sitter_insert" parameterType="sitter">
		INSERT INTO sitter_info (
			user_type, sitter_id, sitter_name, sitter_pass, sitter_code, sitter_gender, sitter_email, sitter_phone, sitter_addr1, sitter_addr2, sitter_startdate, sitter_status, sitter_birthdate, service_area, sitter_info, sitter_certificate, valid)
		VALUES (
			#{user_type}, #{sitter_id}, #{sitter_name}, #{sitter_pass}, #{sitter_code}, #{sitter_gender}, #{sitter_email}, #{sitter_phone}, #{sitter_addr1}, #{sitter_addr2}, sysdate, #{sitter_status}, #{sitter_birthdate}, #{service_area}, #{sitter_info}, #{sitter_certificate}, '0')
	</insert>
	<insert id="sitter_img_insert" parameterType="sitter_img">
		INSERT INTO sitter_img (
			sitter_id, originalImgName, storeImgName)
		VALUES (
			#{sitter_id}, #{originalImgName}, #{storeImgName})
	</insert>  
	<!-- insert end -->
	
	<!-- delete start -->
	<delete id="member_delete">
		DELETE member_info
		WHERE member_id = #{member_id}
	</delete>
	<delete id="sitter_delete">
	 	DELETE sitter_info
	 	WHERE sitter_id = #{sitter_id}
	</delete>
	<!-- delete end -->
	
	<!-- sitter list start -->
	<select id="sitterList" resultType="sitter">
		SELECT * from sitter_info
	</select>
	<!-- sitter list end -->

	<!-- id check -->	
	<select id="idcheck" parameterType="String" resultType="member">
		SELECT * from member_info
		WHERE member_id = #{member_id}
	</select>
	<select id="sitteridcheck" parameterType="String" resultType="sitter">
		SELECT * from sitter_info
		WHERE sitter_id = #{sitter_id}
	</select>
	
	<!-- 예약 리스트 담기 -->
	<select id="resvlist" parameterType="String" resultType="resv">
		SELECT r.*
		FROM resv_history r, member_info m
		WHERE r.member_id = m.member_id
		AND m.member_id = #{member_id} 
	</select>
	<select id="sitter_resvlist" parameterType="String" resultType="resv">
		SELECT * FROM resv_history 
		WHERE sitter_id = #{sitter_id}		 
	</select>
	
</mapper>